<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Human vs Macro Randomized Demo</title>
<style>
body { font-family:sans-serif; margin:0; display:flex; flex-direction:column; align-items:center; background:#081520; color:#eee; }
canvas{background:#0f1724; margin-top:12px; border-radius:8px;}
button{margin:12px;padding:8px 12px; border:none;border-radius:6px;background:#1f6feb;color:white;cursor:pointer;}
</style>
</head>
<body>
<h2>Human vs Macro Randomized Recoil Simulation</h2>
<button onclick="runSimulation()">Run Simulation</button>
<canvas id="cv" width="1000" height="400"></canvas>

<script>
const cv = document.getElementById('cv');
const ctx = cv.getContext('2d');
const W = cv.width, H = cv.height;

function runSimulation(){
  ctx.clearRect(0,0,W,H);
  const shots = 50;
  const recoil = [];
  const human = [];
  const macro = [];

  // generate recoil curve (wobbling)
  let y = 0;
  for(let i=0;i<shots;i++){
    const dy = 4 + Math.random()*2; // upward step
    y -= dy; // negative = upward
    recoil.push(y);
  }

  // generate human compensation (imperfect)
  for(let i=0;i<shots;i++){
    const prev = human[i-1]||0;
    const error = (Math.random()*4 - 2); // random Â±2 px
    human.push(prev - (recoil[i]- (recoil[i-1]||0)) + error);
  }

  // generate macro compensation (human-like randomness)
  for(let i=0;i<shots;i++){
    const prev = macro[i-1]||0;
    // instead of tiny jitter, allow small randomized deviations per shot
    const baseComp = -(recoil[i]- (recoil[i-1]||0));
    const jitter = randRange(-1.5,1.5);   // small pixel randomness
    const overshoot = (Math.random()<0.1 ? randRange(-2,2) : 0); // occasional error ~10% shots
    macro.push(prev + baseComp + jitter + overshoot);
  }

  // draw
  ctx.lineWidth=2;
  drawCurve(recoil,'#888'); // gray recoil
  drawCurve(human,'#7ee787'); // green human
  drawCurve(macro,'#ff7b7b'); // red randomized macro

  ctx.fillStyle='#eee';
  ctx.fillText('Gray: recoil, Green: human, Red: macro (human-like randomized)', 10,20);
}

function drawCurve(arr,color){
  ctx.strokeStyle=color;
  ctx.beginPath();
  for(let i=0;i<arr.length;i++){
    const x = i*(W/arr.length);
    const yPos = H/2 + arr[i];
    if(i===0) ctx.moveTo(x,yPos); else ctx.lineTo(x,yPos);
  }
  ctx.stroke();
}

function randRange(min,max){ return Math.random()*(max-min)+min; }
</script>
</body>
</html>
